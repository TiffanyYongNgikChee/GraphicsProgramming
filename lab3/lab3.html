<!DOCTYPE html>

<html>
  <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
  <head>
    <meta charset="UTF-8">
    <title>Canvas</title>

    <style type="text/css">
      body {
          background-color: white;
      }
      canvas{
            border: 10px solid black; /*Draw a black border around the canvas*/
        }
    </style>

  </head>

  <body>
    <h1>Tiffany Yong</h1>
    <canvas id="canvas-for-ball"width="500" height="500"></canvas>

    <script type="text/javascript">

      // Gets a handle to the element with id canvasOne.
      var canvas = document.getElementById("canvas-for-ball");
      // Get a 2D context for the canvas.
      var ctx = canvas.getContext("2d");

      class Paddle{
        constructor(xPosition,yPosition,width, height){
            this.xPosition=xPosition;   // The horizontal location of the ball.
            this.yPosition=yPosition;   // The vertical location of the ball.
            this.width = width;         // The width of the rectangle
            this.height = height;       // The height of the rectangle
            this.speed = 10;            // Speed for moving the paddle
        }

        // Method to draw the paddle on the canvas
        draw(ctx){
            ctx.fillStyle = '#FFBCBC'; // Set the paddle color (you can change it)
            ctx.fillRect(this.xPosition, this.yPosition, this.width, this.height); // Draw rectangle
        }

        move(x,y){
            this.xPosition = x - this.width/2;
            this.yPosition = y - this.height/2; // Center the paddle at the mouse y position
            
        }
        move_keyboard(direction){
            switch(direction){
            // key code for up arrow
            case 38:
                if(this.yPosition + this.speed >= canvas.height - this.height) return;
                this.yPosition += this.speed;
				break;

			// key code for down arrow
			case 40:
                if(this.yPosition - this.speed <= 0) return;
                this.yPosition -= this.speed;
				break;
            }
        }
      }
      
      // Create a new paddle at position (30, 150) with a width of 150 and height of 100
      let paddle = new Paddle(30, 150, 150, 100);

      // Flags to track whether up or down keys are pressed
      let upPressed = false;
      let downPressed = false;


      // A function to repeat every time the animation loops.
      function repeatme() {

        ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas
        paddle.draw(ctx);  // Draw the paddle at its current position
        window.requestAnimationFrame(repeatme);
      }

      // Get the animation going.
      repeatme();

      // stores these coordinates (x and y) in an object named canvasPosition
      var canvasPosition = {
        x: canvas.offsetLeft, // Horizontal offset from the left side
        y: canvas.offsetTop // Vertical offset from the top side
      };
      
      canvas.addEventListener("click", function(event) { 
        //Figure out local mouse coords
        var mouse = {
            x: event.clientX - canvasPosition.x,
            y: event.clientY - canvasPosition.y
        }

        paddle.move(mouse.x,mouse.y);
        
        console.log(mouse.x+" :: "+mouse.y);
      });

      // Add a Javascript event listener to the keypress event.
	  window.addEventListener("keypress", function(event) { 
			// Just log the event to the console.
			console.log(event);
	  });

	  //keypresses with jQuery
	  $(document.body).on('keydown', function(e) {
			console.log(e.which);
			switch (e.which) {
			// key code for left arrow
			case 37:
				console.log('left arrow key pressed!');
				break;
            // key code for up arrow
            case 38:
                upPressed = true;
				console.log('up arrow key pressed!');
                paddle.move_keyboard(40);
				break;
			// key code for right arrow
			case 39:
				console.log('right arrow key pressed!');
				break;
			// key code for down arrow
			case 40:
                downPressed = true;
				console.log('down arrow key pressed!');
                paddle.move_keyboard(38);
				break;
			}
	  });
    </script>

  </body>

</html>